cc = cli.cc or "gcc"
local arch = cli.arch or "arm64"

return b{
    $ loader: loader.o $arch/trampoline.o $arch/setup.o $arch/syscall.o
        $cc $input -o $output
    $ %.o: %.c
        $cc $input -c -o $output -O2
    $ $arch/%.o: $arch/%.s
        $cc $input -c -o $output
    $ format:VB:
        clang-format -i loader.c

    include("test/build.knit"),
}
